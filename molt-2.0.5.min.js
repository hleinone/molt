(function(a){typeof module!="undefined"?module.exports=a:this.molt=a})(function(){var a="getAttribute",b=[],c=[],d,e=function(){var a,e,f,g,h,j=W(),k;d=-1;while(g=c[++d]){h=(e=g.getAttribute("url")).match(/\{\s*(.*?)\s*\}/)[1].split(/\s*,\s*/),a=h.length;while(a)if(j>h[--a].match(/^!?(.+)/)[1])break;if(h[a].charAt(0)=="!")g.style.display="none";else{g.style.display=="none"&&((f=g.getAttribute("display"))?g.style.display=f:g.style.display="inline"),g.src=e.replace(/\{.+\}/g,h[a]);if(k=b[e]){a=k.length;while(a)k[--a](g)}}}};return{listen:function(c,d){c=c[a]("url"),b[c]||(b[c]=[]),b[c].push(d)},discover:function(){var b=document.getElementsByTagName("img"),d=b.length;while(d)b[--d][a]("url")&&c.push(b[d]);e(),W(e)}}}())